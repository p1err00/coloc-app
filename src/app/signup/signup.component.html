<div class="auth-wrapper w-50 mx-auto d-flex justify-content-center mt-4">
    <span><a href=""><img src="/assets/img/ic_arrow_back_36pt.png" alt="retour arriere"></a></span>

    <form class="form-signin border p-4 w-100" [formGroup]="signupForm" (ngSubmit)="registerUser()">

        <h3 class="h3 mb-3 font-weight-normal text-center">Please sign up</h3>

        <div class="d-flex flex-row justify-content-center mb-4 mt-4">
            <div class="form-check p-3 pr-4" #sexe>
                <input class="form-check-input" type="radio" id="flexRadioDefault1" value="0"
                [ngStyle]="{'border-color':sexe_user?.hasError('required') && signupForm.controls.sexe_user!.touched ? 'red' : ''}"    
                formControlName="sexe_user" #h>
                <label class="form-check-label" for="flexRadioDefault1">
                    H.
                </label>
            </div>
            <div class="form-check p-3 pr-4">
                <input class="form-check-input" type="radio" id="flexRadioDefault2" value="1"
                [ngStyle]="{'border-color':sexe_user?.hasError('required') && signupForm.controls.sexe_user!.touched ? 'red' : ''}"    
                formControlName="sexe_user" #f>
                <label class="form-check-label" for="flexRadioDefault1">
                    F.
                </label>
            </div>
            <div class="form-check p-3">
                <input class="form-check-input" type="radio" id="flexRadioDefault3" value="2"
                [ngStyle]="{'border-color':sexe_user?.hasError('required') && signupForm.controls.sexe_user!.touched ? 'red' : ''}"    
                formControlName="sexe_user" #a>
                <label class="form-check-label" for="flexRadioDefault1">
                    Autre
                </label>
            </div>
            
        </div>

        <div class="d-flex flex-row justify-content-around">
            <div class="d-flex flex-column">
                <div class="form-group">
                    <label>Prenom</label>
                    <input type="text" class="form-control" formControlName="firstname_user" placeholder="Prenom" #prenom
                        [ngStyle]="{'border-color':firstname_user?.hasError('required') && signupForm.controls.firstname_user!.touched ? 'red' : ''}"
                        required>
                </div>

                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" class="form-control" formControlName="lastname_user" placeholder="Nom" #nom
                        [ngStyle]="{'border-color':lastname_user?.hasError('required') && signupForm.controls.lastname_user!.touched ? 'red' : ''}"
                        required>
                </div>

                <div class="form-group">
                    <label>Pseudo</label>
                    <input type="text" class="form-control" formControlName="username_user" placeholder="Ex: jeanmidu13" #pseudo
                        [ngStyle]="{'border-color':username_user?.hasError('required') && signupForm.controls.username_user!.touched || alertUsername ? 'red' : ''}">
                </div>

            </div>
            <div class="d-flex flex-column">
                <div class="form-group">
                    <label>Date de naissance</label>
                    <input type="date" class="form-control" formControlName="date_of_birth_user" placeholder="Select date" #ddn
                        [ngStyle]="{'border-color':date_of_birth_user?.hasError('required') && signupForm.controls.date_of_birth_user!.touched ? 'red' : ''}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"
                        required>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" formControlName="email_user" placeholder="Enter email" #email
                        [ngStyle]="{'border-color':email_user?.hasError('required') && signupForm.controls.email_user!.touched 
                                    || (signupForm.controls.email_user!.touched && email_user?.hasError('pattern')) ? 'red' : ''}"
                        aria-describedby="emailInvalid"
                        required>
                        <div *ngIf="email_user?.hasError('pattern') && signupForm.controls['email_user'].touched" class="alert form-text" id="emailInvalid">
                            <span *ngIf="{'border-color': email_user?.hasError('pattern') ? 'red' : ''}">
                                Email invalid
                            </span>
                        </div>
                </div>

                <div class="form-group">
                    <label>Tel.</label>
                    <input type="text" class="form-control" formControlName="tel_user" placeholder="Enter name" #tel
                        [ngStyle]="{'border-color':tel_user?.hasError('required') && signupForm.controls.tel_user!.touched ? 'red' : ''}"
                        required>
                </div>

            </div>

        </div>

        <div class="form-group">
            <label>Mot de passe</label>
            <input type="password" class="form-control" formControlName="password_user" placeholder="Password"
                aria-describedby="passHelp" 
                [ngStyle]="{'border-color':password_user?.hasError('required') && signupForm.controls.password_user!.touched 
                || (signupForm.controls.password_user!.touched && password_user?.hasError('pattern')) ? 'red' : ''}"
                required>
            <div id="passHelp" class="form-text">
                Doit contenir au moins : 6 caractères / Une majuscule / Un chiffre / Un caractère special
                <div *ngIf="signupForm.controls['password_user'].invalid && (signupForm.controls['password_user'].dirty || signupForm.controls['password_user'].touched)" class="alert form-text" id="emailInvalid">
                    <div *ngIf="signupForm.controls['password_user'].errors" class="form-text">
                        Mot de passe invalide
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label>Confirmation</label>
            <input type="password" class="form-control" formControlName="cmdp" placeholder="Password"
                [ngStyle]="{'border-color': cmdp?.hasError('required') && signupForm.controls.cmdp!.touched ? 'red' : ''}"
                required>
                <div class="form-text" *ngIf="cmdp?.value != password_user?.value">
                    Pas les memes
                </div>
        </div>

        
        <button type="submit" class="btn btn-block btn-primary">Sign up</button>
    </form>
</div>
<div class="alert alert-danger w-50 mx-auto mt-4" role="alert" *ngIf="alertUsername">
    Le nom d'utilisateur existe deja
  </div>
<!-- Alert if username exist -->




